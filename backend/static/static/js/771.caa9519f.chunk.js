"use strict";(self.webpackChunklearnalytics_frontend=self.webpackChunklearnalytics_frontend||[]).push([[771],{7771:(e,s,t)=>{t.r(s),t.d(s,{default:()=>O});var r=t(5043),l=t(3216),i=t(5300),a=t(2380),n=t(4082),o=t(3458),d=t(712),c=t(5099),x=t(8432),m=t(3460),u=t(1380),h=t(4421),g=t(6487),p=t(1969),b=t(7375),j=t(6852),v=t(3395),y=t(2938),f=t(8112),N=t(5275),w=t(2543),A=t(1701),k=t(9621),C=t(108),S=t(877),_=t(7734),L=t(2185),D=t(6026),R=t(6150),T=t(3839),F=t(3768),P=t(579);const $=e=>{var s,t,r,l;let{data:a,navigate:f}=e;const N=(null===a||void 0===a||null===(s=a.recent_activity)||void 0===s?void 0:s.slice(0,7).map((e,s)=>({day:new Date(e.date).toLocaleDateString("en",{weekday:"short"}),active:Math.random()>.3?1:0})))||[];return(0,P.jsxs)("div",{className:"space-y-8",children:[(0,P.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,P.jsx)(W,{title:"Total Courses",value:(null===a||void 0===a?void 0:a.total_enrollments)||0,icon:i.A,color:"blue",trend:"+2 this month",description:"Enrolled courses"}),(0,P.jsx)(W,{title:"Completed",value:(null===a||void 0===a?void 0:a.completed_courses)||0,icon:n.A,color:"green",trend:"+1 this week",description:"Finished courses"}),(0,P.jsx)(W,{title:"Study Time",value:`${Math.round((null===a||void 0===a?void 0:a.total_watch_time)||0)}h`,icon:o.A,color:"purple",trend:"+5h this week",description:"Total learning time"}),(0,P.jsx)(W,{title:"Average Score",value:`${Math.round((null===a||void 0===a?void 0:a.avg_quiz_score)||0)}%`,icon:d.A,color:"yellow",trend:"+5% this month",description:"Quiz performance"})]}),(0,P.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,P.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,P.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:[(0,P.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Learning Progress"}),(0,P.jsx)("p",{className:"text-gray-600 text-sm",children:"Your weekly study activity"})]}),(0,P.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,P.jsx)(c.A,{className:"h-5 w-5 text-blue-600"}),(0,P.jsx)("span",{className:"text-sm font-medium text-blue-600",children:"This Week"})]})]}),(0,P.jsx)(C.u,{width:"100%",height:200,children:(0,P.jsxs)(S.Q,{data:[{name:"Mon",progress:20},{name:"Tue",progress:35},{name:"Wed",progress:45},{name:"Thu",progress:60},{name:"Fri",progress:70},{name:"Sat",progress:85},{name:"Sun",progress:90}],children:[(0,P.jsx)("defs",{children:(0,P.jsxs)("linearGradient",{id:"colorProgress",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,P.jsx)("stop",{offset:"5%",stopColor:"#3B82F6",stopOpacity:.3}),(0,P.jsx)("stop",{offset:"95%",stopColor:"#3B82F6",stopOpacity:0})]})}),(0,P.jsx)(_.d,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,P.jsx)(L.W,{dataKey:"name",stroke:"#9CA3AF"}),(0,P.jsx)(D.h,{stroke:"#9CA3AF"}),(0,P.jsx)(R.m,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),(0,P.jsx)(T.G,{type:"monotone",dataKey:"progress",stroke:"#3B82F6",strokeWidth:3,fillOpacity:1,fill:"url(#colorProgress)"})]})})]}),(0,P.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:[(0,P.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Continue Learning"}),(0,P.jsx)("p",{className:"text-gray-600 text-sm",children:"Pick up where you left off"})]}),(0,P.jsxs)("button",{onClick:()=>f("/courses"),className:"text-blue-600 hover:text-blue-700 font-medium text-sm flex items-center",children:["View All ",(0,P.jsx)(x.A,{className:"h-4 w-4 ml-1"})]})]}),(0,P.jsx)("div",{className:"space-y-4",children:(null===a||void 0===a||null===(t=a.current_courses)||void 0===t?void 0:t.length)>0?a.current_courses.slice(0,3).map(e=>(0,P.jsx)(B,{course:e,navigate:f},e.id)):(0,P.jsx)(K,{icon:m.A,title:"No courses yet",description:"Start your learning journey by enrolling in a course",action:(0,P.jsx)("button",{onClick:()=>f("/courses"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Browse Courses"})})})]})]}),(0,P.jsxs)("div",{className:"space-y-6",children:[(null===a||void 0===a?void 0:a.ai_insights)&&(0,P.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 rounded-xl p-6 border border-purple-100",children:[(0,P.jsxs)("div",{className:"flex items-center mb-4",children:[(0,P.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 p-2 rounded-lg",children:(0,P.jsx)(u.A,{className:"h-5 w-5 text-white"})}),(0,P.jsxs)("div",{className:"ml-3",children:[(0,P.jsx)("h3",{className:"font-semibold text-gray-900",children:"AI Insights"}),(0,P.jsx)("p",{className:"text-xs text-gray-600",children:"Personalized for you"})]})]}),(0,P.jsx)("div",{className:"prose prose-sm text-gray-700",children:(0,P.jsx)("p",{className:"text-sm leading-relaxed",children:a.ai_insights})})]}),(0,P.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:[(0,P.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,P.jsxs)("div",{className:"flex items-center",children:[(0,P.jsx)(h.A,{className:"h-5 w-5 text-orange-500 mr-2"}),(0,P.jsx)("h3",{className:"font-semibold text-gray-900",children:"Learning Streak"})]}),(0,P.jsx)("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs font-medium",children:"7 days"})]}),(0,P.jsx)("div",{className:"flex justify-between items-center mb-3",children:N.map((e,s)=>(0,P.jsxs)("div",{className:"text-center",children:[(0,P.jsx)("div",{className:"w-6 h-6 rounded-full mb-1 "+(e.active?"bg-orange-400":"bg-gray-200")}),(0,P.jsx)("span",{className:"text-xs text-gray-600",children:e.day})]},s))}),(0,P.jsx)("p",{className:"text-sm text-gray-600",children:"Keep it up! You're on a 7-day learning streak \ud83d\udd25"})]}),(0,P.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:[(0,P.jsxs)("div",{className:"flex items-center mb-4",children:[(0,P.jsx)(g.A,{className:"h-5 w-5 text-blue-600 mr-2"}),(0,P.jsx)("h3",{className:"font-semibold text-gray-900",children:"Recommended"})]}),(0,P.jsx)("div",{className:"space-y-3",children:(null===a||void 0===a||null===(r=a.recommendations)||void 0===r?void 0:r.slice(0,2).map((e,s)=>(0,P.jsxs)("div",{className:"border border-gray-200 rounded-lg p-3 hover:shadow-md transition-shadow cursor-pointer",children:[(0,P.jsx)("h4",{className:"font-medium text-gray-900 text-sm mb-1",children:e.title}),(0,P.jsx)("p",{className:"text-xs text-gray-600 mb-2 line-clamp-2",children:e.description}),(0,P.jsxs)("div",{className:"flex justify-between items-center",children:[(0,P.jsx)("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:e.difficulty}),(0,P.jsx)("button",{onClick:()=>f("/courses"),className:"text-blue-600 hover:text-blue-700 text-xs font-medium",children:"Enroll"})]})]},s)))||(0,P.jsx)(K,{icon:p.A,title:"No recommendations",description:"Complete more courses to get personalized recommendations",size:"small"})})]}),(0,P.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:[(0,P.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,P.jsxs)("div",{className:"space-y-3",children:[(0,P.jsx)(E,{icon:b.A,title:"Resume Learning",description:"Continue your last course",onClick:()=>f("/courses"),color:"blue"}),(0,P.jsx)(E,{icon:j.A,title:"View Analytics",description:"Check your progress",onClick:()=>f("/analytics"),color:"purple"}),(0,P.jsx)(E,{icon:v.A,title:"Achievements",description:"See your badges",onClick:()=>f("/achievements"),color:"green"})]})]})]})]}),(0,P.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:[(0,P.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"}),(0,P.jsx)("p",{className:"text-gray-600 text-sm",children:"Your latest learning achievements"})]}),(0,P.jsx)(y.A,{className:"h-5 w-5 text-gray-400"})]}),(0,P.jsx)("div",{className:"space-y-4",children:(null===a||void 0===a||null===(l=a.recent_activity)||void 0===l?void 0:l.length)>0?a.recent_activity.slice(0,5).map((e,s)=>(0,P.jsx)(M,{activity:e},s)):(0,P.jsx)(K,{icon:c.A,title:"No recent activity",description:"Start learning to see your activity here"})})]})]})},z=e=>{var s;let{data:t,onRefresh:r}=e;return(0,P.jsx)("div",{className:"space-y-8",children:(0,P.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,P.jsx)(W,{title:"Total Students",value:(null===t||void 0===t?void 0:t.total_students)||0,icon:f.A,color:"blue",trend:"+12% this month",description:"Active learners"}),(0,P.jsx)(W,{title:"Active Courses",value:(null===t||void 0===t?void 0:t.total_courses)||0,icon:i.A,color:"green",trend:"+3 new courses",description:"Published content"}),(0,P.jsx)(W,{title:"Total Enrollments",value:(null===t||void 0===t?void 0:t.total_enrollments)||0,icon:N.A,color:"purple",trend:"+18% this month",description:"Course enrollments"}),(0,P.jsx)(W,{title:"At-Risk Students",value:(null===t||void 0===t||null===(s=t.dropout_alerts)||void 0===s?void 0:s.length)||0,icon:w.A,color:"red",trend:"-8% improvement",description:"Need attention"})]})})},W=e=>{let{title:s,value:t,icon:r,color:l,trend:i,description:a}=e;const n={blue:"from-blue-500 to-blue-600 bg-blue-50 text-blue-600",green:"from-green-500 to-green-600 bg-green-50 text-green-600",purple:"from-purple-500 to-purple-600 bg-purple-50 text-purple-600",yellow:"from-yellow-500 to-yellow-600 bg-yellow-50 text-yellow-600",red:"from-red-500 to-red-600 bg-red-50 text-red-600"};return(0,P.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100 hover:shadow-xl transition-shadow",children:(0,P.jsx)("div",{className:"flex items-center justify-between",children:(0,P.jsxs)("div",{className:"flex-1",children:[(0,P.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,P.jsx)("p",{className:"text-sm text-gray-500 font-medium",children:s}),(0,P.jsx)("div",{className:`p-2 rounded-lg bg-gradient-to-r ${n[l].split(" ")[0]} ${n[l].split(" ")[1]}`,children:(0,P.jsx)(r,{className:"h-5 w-5 text-white"})})]}),(0,P.jsx)("p",{className:"text-3xl font-bold text-gray-900 mb-1",children:t}),(0,P.jsx)("p",{className:"text-xs text-gray-600 mb-2",children:a}),i&&(0,P.jsx)("div",{className:"flex items-center",children:(0,P.jsx)("span",{className:"text-xs font-medium "+(i.startsWith("+")?"text-green-600":"text-red-600"),children:i})})]})})})},B=e=>{let{course:s,navigate:t}=e;return(0,P.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-all cursor-pointer group",children:[(0,P.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,P.jsx)("h4",{className:"font-medium text-gray-900 group-hover:text-blue-600 transition-colors",children:s.title}),(0,P.jsx)("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:s.difficulty})]}),(0,P.jsxs)("p",{className:"text-sm text-gray-600 mb-3",children:["By ",s.instructor]}),(0,P.jsxs)("div",{className:"mb-3",children:[(0,P.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[(0,P.jsx)("span",{children:"Progress"}),(0,P.jsxs)("span",{children:[Math.round(s.progress),"%"]})]}),(0,P.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,P.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-300",style:{width:`${s.progress}%`}})})]}),(0,P.jsxs)("button",{onClick:()=>t("/courses"),className:"flex items-center text-blue-600 hover:text-blue-700 text-sm font-medium group-hover:translate-x-1 transition-transform",children:[(0,P.jsx)(A.A,{className:"h-4 w-4 mr-1"}),"Continue Learning"]})]})},E=e=>{let{icon:s,title:t,description:r,onClick:l,color:i}=e;return(0,P.jsx)("button",{onClick:l,className:`w-full text-left p-3 rounded-lg border border-gray-200 hover:shadow-md transition-all ${{blue:"hover:bg-blue-50 text-blue-600",purple:"hover:bg-purple-50 text-purple-600",green:"hover:bg-green-50 text-green-600"}[i]}`,children:(0,P.jsxs)("div",{className:"flex items-center",children:[(0,P.jsx)(s,{className:"h-5 w-5 mr-3"}),(0,P.jsxs)("div",{children:[(0,P.jsx)("p",{className:"font-medium text-gray-900 text-sm",children:t}),(0,P.jsx)("p",{className:"text-xs text-gray-600",children:r})]})]})})},M=e=>{let{activity:s}=e;return(0,P.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-gray-100 last:border-b-0",children:[(0,P.jsxs)("div",{className:"flex items-center",children:[(0,P.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-3",children:(0,P.jsx)(n.A,{className:"h-5 w-5 text-blue-600"})}),(0,P.jsxs)("div",{children:[(0,P.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:s.title}),(0,P.jsx)("p",{className:"text-xs text-gray-500",children:s.course})]})]}),(0,P.jsxs)("div",{className:"text-right",children:[(0,P.jsx)("div",{className:"text-sm font-medium text-gray-900",children:s.score}),(0,P.jsx)("div",{className:"text-xs text-gray-500",children:new Date(s.date).toLocaleDateString()})]})]})},K=e=>{let{icon:s,title:t,description:r,action:l,size:i="normal"}=e;const a="small"===i?"py-6":"py-12";return(0,P.jsxs)("div",{className:`text-center ${a}`,children:[(0,P.jsx)(s,{className:("small"===i?"h-8 w-8":"h-12 w-12")+" text-gray-400 mx-auto mb-3"}),(0,P.jsx)("h3",{className:("small"===i?"text-sm":"text-base")+" font-medium text-gray-900 mb-1",children:t}),(0,P.jsx)("p",{className:("small"===i?"text-xs":"text-sm")+" text-gray-500 mb-4",children:r}),l&&l]})},O=e=>{var s;let{user:t}=e;const[n,o]=(0,r.useState)(null),[d,c]=(0,r.useState)(!0),[x,m]=(0,r.useState)(!1),[u,h]=(0,r.useState)("7d"),g=(0,l.Zp)();(0,r.useEffect)(()=>{p()},[u]);const p=async()=>{try{if("admin"===(null===t||void 0===t?void 0:t.role)){const e=await k.rh.getAdminDashboard();o(e)}else{const e=await k.rh.getStudentDashboard();o(e)}}catch(e){(0,k.hS)(e)}finally{c(!1),m(!1)}},b=async()=>{m(!0),await p(),F.Ay.success("Dashboard refreshed!")};return d?(0,P.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:(0,P.jsxs)("div",{className:"text-center",children:[(0,P.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"}),(0,P.jsx)("p",{className:"text-gray-600 text-lg",children:"Loading your dashboard..."})]})}):(0,P.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-50",children:[(0,P.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-100",children:(0,P.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,P.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,P.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,P.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-3 rounded-xl shadow-lg",children:(0,P.jsx)(i.A,{className:"h-8 w-8 text-white"})}),(0,P.jsxs)("div",{children:[(0,P.jsxs)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-blue-900 bg-clip-text text-transparent",children:["Welcome back, ",null===t||void 0===t||null===(s=t.full_name)||void 0===s?void 0:s.split(" ")[0],"!"]}),(0,P.jsx)("p",{className:"text-gray-600 mt-1",children:"admin"===(null===t||void 0===t?void 0:t.role)?"Admin Dashboard":"Continue your learning journey"})]})]}),(0,P.jsxs)("div",{className:"mt-4 sm:mt-0 flex items-center space-x-3",children:[(0,P.jsxs)("select",{value:u,onChange:e=>h(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg bg-white shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,P.jsx)("option",{value:"7d",children:"Last 7 days"}),(0,P.jsx)("option",{value:"30d",children:"Last 30 days"}),(0,P.jsx)("option",{value:"90d",children:"Last 3 months"})]}),(0,P.jsx)("button",{onClick:b,disabled:x,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 shadow-lg",children:x?(0,P.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):"Refresh"}),(0,P.jsxs)("button",{onClick:()=>g("/courses"),className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition-all transform hover:scale-105 shadow-lg",children:[(0,P.jsx)(a.A,{className:"h-4 w-4 inline mr-2"}),"Explore Courses"]})]})]})})}),(0,P.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:"admin"===(null===t||void 0===t?void 0:t.role)?(0,P.jsx)(z,{data:n,onRefresh:b}):(0,P.jsx)($,{data:n,navigate:g})})]})}}}]);
//# sourceMappingURL=771.caa9519f.chunk.js.map